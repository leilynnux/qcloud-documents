# 包管理 #
为软件的发布创建一个可重复且可靠的过程。发布的对象称为文件，文件分为三类：文件包；配置文件；脚本文件。支持版本控制，文件包的安装、升级、重启、回滚、卸载等操作。有完善的文件校验机制和版本一致性保证机制。
## 1. 包查询 ##
### 1.1 最近查询 ###
展示用户最近访问过的文件包、配置、脚本信息，还包括文件版本数、部署业务数、实例数。  
点击【包管理】>【包查询】，即可查看到相关信息。

![](http://i.imgur.com/DbDxUZa.png)

### 1.2 全量查询 ###
展示织云所有文件包、配置、脚本的信息，还包括文件版本数、部署业务数、实例数。支持按类型和负责人进行搜索。

![](http://i.imgur.com/U7bmeNG.png)

## 2. 业务查询 ##
查询某个三级业务下服务器部署的所有文件包、配置、脚本的信息，包括一致性、设备数、发布版本数、未发布设备数。  
点击【包管理】>【业务查询】，即可查看到相关信息。

![](http://i.imgur.com/PUfnNlE.png)

## 3. 文件包 ##
### 3.1 上传文件包 ###

点击【包管理】>【包查询】，点击右上角的【上传文件包】

![](http://i.imgur.com/DbDxUZa.png)

进入下图界面，填写包相关信息，点击【下一步】。可以上传单文件并且修改文件权限，可以创建文件夹，也可以上传压缩包并解压。

![](http://i.imgur.com/IiH0dn4.png)

点击【下一步】

![](http://i.imgur.com/9FAc4yj.png)

填写启动脚本和停止脚本，用于设置服务启动方式和停止方式。

![](http://i.imgur.com/KJJJ2jw.png)

点击【保存】后，可以看到新包创建成功。

### 3.2 发布文件包 ###
点击要发布的文件包，进入文件包详情页
![](http://i.imgur.com/5eVxOqV.png)

点击【发布】按钮，进入包发布页。我们要求包需要先绑定业务才能进行发布，所以先点击下方的【添加业务】按钮，并选择三级业务进行绑定

![](http://i.imgur.com/J7ubUTL.png)

选择这个三级业务，可以看到右边框出现两个IP，此时两个IP都是无版本

![](http://i.imgur.com/h57L5nO.png)
下拉到底部，并勾选发布后执行启动脚本，点击【发布】按钮，可以看到右边有浮框显示正在下发文件包

![](http://i.imgur.com/9gmcBHh.png)

发布成功后可以看到两个IP的版本号都已更新

![](http://i.imgur.com/M6VnNyf.png)

### 3.3 创建新版本 ###
点击要创建新版本的文件包，进入文件包详情页
![](http://i.imgur.com/HyEXLwi.png)
点击【创建新版本】
![](http://i.imgur.com/R8CsKzk.png)
点击【下一步】，可以上传文件、创建文件夹、上传压缩包并解压，也可以删除文件、删除文件夹
![](http://i.imgur.com/YRHTMJh.png)

点击【下一步】，可以修改启动脚本和停止脚本
![](http://i.imgur.com/wEXyxR2.png)

点击保存后，新版本创建成功。

### 3.3 文件包详情页 ###
展示一个文件包的所有版本列表，包括版本号、版本描述、创建人、创建时间、实例数、部署业务列表，支持下载整个版本。如果版本没有实例数，则支持删除版本。如果整个文件包都没有实例数，则支持删除文件包。
![](http://i.imgur.com/Py1030f.png)

### 3.3 实例操作 ###
点击文件包某个版本的实例数可进入到实例列表，可进行批量启动、批量停止、批量重启，也可以批量升级版本、批量降级版本，还可以批量卸载文件包。
![](http://i.imgur.com/tRFtNKG.png)
## 4. 配置 ##
### 4.1 上传配置 ###
点击【包管理】>【包查询】>【上传配置】，填写配置的相关信息
![](http://i.imgur.com/gFVmNch.png)
点击【下一步】，可以上传单文件
![](http://i.imgur.com/DUBK9ww.png)
点击【下一步】，填写前置脚本和后置脚本，用于设置配置下发前置脚本和后置脚本
![](http://i.imgur.com/rjycIAh.png)
点击【保存】后，可以看到新配置创建成功
### 4.2 发布配置 ###
点击要发布的配置，进入配置详情页
![](http://i.imgur.com/eww4yBG.png)
点击【发布】按钮，进入配置发布页。我们要求配置需要先绑定业务才能进行发布，所以先点击下方的【添加业务】按钮，并选择三级业务进行绑定

![](http://i.imgur.com/a09e8lR.png)
选择这个三级业务，可以看到右边框出现两个IP，此时两个IP都是无版本
![](http://i.imgur.com/sgxYfky.png)

下拉到底部，点击【发布】按钮，可以看到右边有浮框显示正在下发配置
![](http://i.imgur.com/lL8H4nQ.png)

发布成功后可以看到两个IP的版本号都已更新
![](http://i.imgur.com/MAedgXS.png)
### 4.3 创建新版本 ###
点击要创建新版本的配置，进入配置详情页
![](http://i.imgur.com/ZX9azn3.png)
点击【创建新版本】
![](http://i.imgur.com/HeNxqRp.png)
点击【下一步】，可以直接在页面编辑配置文件，页面会有文本对比
![](http://i.imgur.com/Md3IyLu.png)

点击【下一步】，可以修改前置脚本和后置脚本
![](http://i.imgur.com/xcceQZA.png)
点击【保存】后，新版本创建成功
### 4.4 配置详情页 ###
展示一个配置的所有版本列表，包括版本号、版本描述、创建人、创建时间、下发次数，支持下载配置文件。如果版本没有实例数，则支持删除版本。如果整个配置都没有实例数，则支持删除配置。
![](http://i.imgur.com/zoQJiKV.png)
## 5. 脚本 ##
### 5.1 上传脚本 ###
点击【包管理】>【包查询】>【上传脚本】，填写脚本的相关信息

![](http://i.imgur.com/wayBbjR.png)

点击【下一步】，可以上传单文件

![](http://i.imgur.com/L1VPYJS.png)
点击【完成】后，可以看到新脚本创建成功
### 5.2 发布脚本 ###
点击要执行的脚本，进入脚本详情页
![](http://i.imgur.com/ldY6sgy.png)
点击【执行】按钮，进入脚本发布页。我们要求脚本需要先绑定业务才能进行发布，所以先点击下方的【添加业务】按钮，并选择三级业务进行绑定
![](http://i.imgur.com/TsXGMd2.png)
选择这个三级业务，可以看到右边框出现两个IP，此时两个IP都是无版本
![](http://i.imgur.com/vuM6xX3.png)
下拉到底部，点击【发布】按钮，可以看到右边有浮框显示正在下发配置
![](http://i.imgur.com/zErddRS.png)
发布成功后可以看到两个IP的版本号都已更新
![](http://i.imgur.com/q1ShHzu.png)
### 5.3 创建新版本 ###
点击要创建新版本的脚本，进入脚本详情页
![](http://i.imgur.com/RxPdvtf.png)
点击【创建新版本】
![](http://i.imgur.com/DBJ0MmV.png)
点击【下一步】，可以直接在页面编辑配置文件，页面会有文本对比
![](http://i.imgur.com/TG3CHW3.png)
点击【完成】后，新版本创建成功。
### 5.4 脚本详情页 ###
展示一个脚本的所有版本列表，包括版本号、版本描述、创建人、创建时间、下发次数，支持下载脚本文件。如果版本没有实例数，则支持删除版本。如果整个脚本都没有实例数，则支持删除脚本。
![](http://i.imgur.com/Z6YEZpO.png)
